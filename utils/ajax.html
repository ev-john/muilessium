<!DOCTYPE html>
<html>
<head>
    <title>Muilessium - ajax.js</title>

    <meta http-equiv='content-type' content='text/html; charset=UTF-8'>
    <meta name='viewport' content='user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1'>

    <link rel='stylesheet' media='all' href='../assets/css/muilessium.min.css?v=0.1.46' />
    <link rel='stylesheet' media='all' href='../assets/css/docs-styles.css?v=0663251985523079' />

    <link rel='icon' href='../icons/favicon.ico' type='image/x-icon' />

    <style>
        h2 {
            font-size: 2rem !important;
        }

        hr {
            display: none;
        }

        .mui-page-header {
            position: relative;
        }

        .mui-content-container {
            padding: .2rem 0;
        }

        ._separate-1-bottom {
            margin-bottom: 1rem;
        }

        .anchor-link {
            opacity: 0;
        }

        .anchor-link:hover,
        .anchor-link:focus {
            opacity: 1;
        }

        ul {
            margin-top: 1rem;
            margin-bottom: 1rem;
            list-style-position: inside;
        }

        li:not(:first-of-type) {
            margin-top: .5rem;
        }

    </style>

</head>
<body>
    <div class='mui-scroll-fix'></div>
    <header class='mui-page-header -black-bg'>
    <div class='mui-content-container'>
        <div class='mui-header-logo _left'>
            <img class='mui-image -logo -js-lazy-load' data-src='../images/muilessium.png' alt='logo'>
            <a class='link _right' href='/'>
                <h1 class='-white _bigger-1'>
                    <span>Muilessium</span>
                    
                        <span class='_smaller-1'> (ajax.js) </span>
                    
                </h1>
            </a>
        </div>
    </div>
    </header>

    <main class='mui-page-container _separate-3'>
            
                
                <div class='' id='section-1'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-1'>&#182;</a>
                        </div>
                        <hr>

                    </div>
                    <div class='mui-content-container'>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-2'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-2'>&#182;</a>
                        </div>
                        <h2 id="ajax-utilities">Ajax utilities</h2>

                    </div>
                    <div class='mui-content-container'>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-3'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-3'>&#182;</a>
                        </div>
                        <p>Here is the full list of ajax utilities:</p>
<ul>
<li>post(url, data, successCallback, errorCallback)</li>
<li>postProtected(url, data, successCallback)</li>
<li>get(url, successCallback, errorCallback)</li>
<li>getProtected(url, successCallback)</li>
</ul>

                    </div>
                    <div class='mui-content-container'>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-4'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-4'>&#182;</a>
                        </div>
                        <h2 id="post">Post</h2>

                    </div>
                    <div class='mui-content-container'>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-5'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-5'>&#182;</a>
                        </div>
                        <p>Makes a POST request and executes a success or error callback when
the request state changes</p>

                    </div>
                    <div class='mui-content-container'>
                        
                            <div class='source-code _separate-1-bottom'><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">post</span>(<span class="hljs-params">url, data, successCallback, errorCallback</span>) </span>{
    <span class="hljs-keyword">let</span> request = <span class="hljs-keyword">new</span> XMLHttpRequest();

    request.open(<span class="hljs-string">'POST'</span>, url, <span class="hljs-literal">true</span>);
    request.setRequestHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/x-www-form-urlencoded; charset=UTF-8'</span>);

    request.onreadystatechange = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (request.readyState === <span class="hljs-number">4</span>) {
            <span class="hljs-comment">/* Only 2xx codes are successful for the POST request. */</span>
            <span class="hljs-keyword">if</span> ((request.status &gt;= <span class="hljs-number">200</span>) &amp;&amp; (request.status &lt; <span class="hljs-number">300</span>)) {
                successCallback(request.responseText);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`POST (<span class="hljs-subst">${url}</span>): error <span class="hljs-subst">${request.status}</span> <span class="hljs-subst">${request.statusText}</span>`</span>);
                errorCallback(request.status, request.statusText);
            }
        }
    }

    request.send(data);
};</pre></div></div>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-6'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-6'>&#182;</a>
                        </div>
                        <h2 id="protected-post">Protected post</h2>

                    </div>
                    <div class='mui-content-container'>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-7'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-7'>&#182;</a>
                        </div>
                        <p>Makes a POST request and executes a callback if it was success
and tries to repeat request otherwise</p>

                    </div>
                    <div class='mui-content-container'>
                        
                            <div class='source-code _separate-1-bottom'><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postProtected</span>(<span class="hljs-params">url, data, callback</span>) </span>{
    post(url, data, callback, (error) =&gt; {
        setTimeout(
            postProtected.bind(<span class="hljs-literal">null</span>, url, data, callback),
            <span class="hljs-number">1500</span>
        );
    });
};</pre></div></div>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-8'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-8'>&#182;</a>
                        </div>
                        <h2 id="get">Get</h2>

                    </div>
                    <div class='mui-content-container'>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-9'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-9'>&#182;</a>
                        </div>
                        <p>Makes a GET request and executes a success or error callback when
the request state changes</p>

                    </div>
                    <div class='mui-content-container'>
                        
                            <div class='source-code _separate-1-bottom'><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params">url, successCallback, errorCallback</span>) </span>{
    <span class="hljs-keyword">let</span> request = <span class="hljs-keyword">new</span> XMLHttpRequest();

    request.open(<span class="hljs-string">'GET'</span>, url, <span class="hljs-literal">true</span>);

    request.onreadystatechange = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (request.readyState === <span class="hljs-number">4</span>) {
            <span class="hljs-comment">/* Status 304 (Not Modified) is also a successful for the GET request.*/</span>
            <span class="hljs-keyword">if</span> (((request.status &gt;= <span class="hljs-number">200</span>) &amp;&amp; (request.status &lt; <span class="hljs-number">300</span>)) || (request.status === <span class="hljs-number">304</span>)) {
                successCallback(request.responseText);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-built_in">console</span>.error(<span class="hljs-string">`GET (<span class="hljs-subst">${url}</span>): error <span class="hljs-subst">${request.status}</span> <span class="hljs-subst">${request.statusText}</span>`</span>);
                errorCallback(request.status, request.statusText);
            }
        }
    };

    request.send(<span class="hljs-literal">null</span>);
};</pre></div></div>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-10'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-10'>&#182;</a>
                        </div>
                        <h2 id="protected-get">Protected get</h2>

                    </div>
                    <div class='mui-content-container'>
                        
                    </div>
                </div>
            
                
                <div class='' id='section-11'>
                    <div class='mui-content-container'>
                        
                        <div class=''>
                            <a class='anchor-link _smaller-2 -grey-3 -f-blue-3' href='#section-11'>&#182;</a>
                        </div>
                        <p>Makes a GET request and executes a callback if it was success
and tries to repeat request otherwise</p>

                    </div>
                    <div class='mui-content-container'>
                        
                            <div class='source-code _separate-1-bottom'><div class='highlight'><pre>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProtected</span>(<span class="hljs-params">url, callback</span>) </span>{
    get(url, callback, (error) =&gt; {
        setTimeout(
            getProtected.bind(<span class="hljs-literal">null</span>, url, callback),
            <span class="hljs-number">1500</span>
        );
    });
};


<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ajax = {
    post,
    postProtected,
    get,
    getProtected
};</pre></div></div>
                        
                    </div>
                </div>
            
    </main>

    <div class='mui-page-footer _text-center _line-3r -white -black-bg'>
        <span>Copyright &copy; Ivan Bogachev, 2016-2017</span>
    </div>

    <div id='scroll-to-top-button' class='( mui-button -icon ) -white-bg -black -f-blue-2-bg -f-white scroll-to-top -hidden _shadow-3'>
        <span>&uarr;</span>
    </div>


    <script src='../assets/js/muilessium.min.js?v=0.1.46'></script>
</body>
</html>
